{% extends "base.html" %}

{% block content %}
<div class="py-4">
    <h2>Enviar imagem do cronograma</h2>
    <p>Envie uma imagem com as leituras (ex: "01/11 - João 1"). O sistema fará OCR e salvará as leituras extraídas.</p>

    <div class="card mb-3">
        <div class="card-body">
            <form action="/upload" enctype="multipart/form-data" method="post">
                <div class="mb-3">
                    <label for="file" class="form-label">Selecionar imagem</label>
                    <input class="form-control" type="file" id="file" name="file" accept="image/*" required>
                </div>
                <button class="btn btn-primary" type="submit">Enviar imagem</button>
            </form>
        </div>
    </div>

    {% if mensagem %}
    <div class="alert alert-success">{{ mensagem }}</div>
    {% endif %}

    {% if texto_extraido %}
    <div class="card">
        <div class="card-header">Texto extraído</div>
        <div class="card-body">
            <pre style="white-space: pre-wrap;">{{ texto_extraido }}</pre>
        </div>
    </div>
    {% endif %}

    {% if todas_leituras %}
    <div class="mt-4">
        <h5>Todas as leituras</h5>
        <ul>
            {% for item in todas_leituras %}
                <li><small>{{ item.data_envio }}</small> — <pre style="display:inline; white-space:pre-wrap;">{{ item.texto }}</pre></li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    <div class="mt-4">
        <a href="/listar_leituras" class="btn btn-outline-secondary">Ver todas as leituras extraídas</a>
        <a href="/versiculo-hoje?versao={{ versao }}" class="btn btn-outline-success">Ver leitura de hoje</a>
    </div>
</div>
{% endblock %}
